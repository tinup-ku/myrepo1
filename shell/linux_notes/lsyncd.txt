
On master host:
Install lsyncd

[root@devctlvpptapp01 yum.repos.d]# cat epel.repo
[epel]
name=Epel
baseurl=http://pkg-ct-as-1.associatesys.local/yumrepos/mrepo/rhel-6-x86_64/RPMS.epel/
enabled=1
gpgcheck=0

  =
yum install lsyncd
 ==

setup ssh keys passwordless access to slave host

  =====

[root@devctlvpptapp01 sync]# cat new.lua
settings {
       logfile = "/var/log/lsyncd/lsyncd.log",
       statusFile = "/var/log/lsyncd/lsyncd.status",
       statusInterval = 2
}

www_target_list = {
        "devctlvpptapp02.iteclientsys.local:/var/tmp/new/",
}

for _, server in ipairs(www_target_list) do
        sync {
                default.rsync,
                delay = 0,
                source = "/var/tmp/new/",
                target = server,
                rsync = {
                        compress = true,
                        acls = true,
                        verbose = true,
                        owner = true,
                        group = true,
                        perms = true,
                        rsh = "/usr/bin/ssh -p 22 -o StrictHostKeyChecking=no"
                }
        }
end


  ======
Now start the replication -
   lsyncd new.lua

   ======
check the target host for updates

  =====

to stop replication 
ps -eaf | grep lsync

find the id for process - lsyncd new.lua
and kill it

   ====

Troubleshooting..
check the log file -
/var/log/lsyncd/lsyncd.log

  =====
Other working lua files

[root@prdctlvptpeca01 sync]# cat hiera.lua
settings {
       logfile = "/var/log/lsyncd/lsyncd-hiera.log",
       statusFile = "/var/log/lsyncd/lsyncd-hiera.status",
       statusInterval = 2
}

www_target_list = {
        "npectlvptpmcf01.iteclientsys.local:/etc/puppet/hiera/",
        "prdctlvptpmcf01.clientsys.local:/etc/puppetlabs/puppet/hiera/",
        "prdctlvptpmaf01.associatesys.local:/etc/puppetlabs/puppet/hiera/",
}

for _, server in ipairs(www_target_list) do
        sync {
                default.rsync,
                delay = 0,
                source = "/etc/puppetlabs/puppet/hiera",
                target = server,
                rsync = {
                        compress = true,
                        acls = true,
                        verbose = true,
                        owner = true,
                        group = true,
                        perms = true,
                        rsh = "/usr/bin/ssh -p 22 -o StrictHostKeyChecking=no"
                }
        }
end

  =====

[root@prdctlvptpeca01 sync]# cat environments.lua
settings {
       logfile = "/var/log/lsyncd/lsyncd-environments.log",
       statusFile = "/var/log/lsyncd/lsyncd-environments.status",
       statusInterval = 2
}

www_target_list = {
        "npectlvptpmcf01.iteclientsys.local:/etc/puppet/environments/",
        "prdctlvptpmcf01.clientsys.local:/etc/puppetlabs/puppet/environments/",
        "prdctlvptpmaf01.associatesys.local:/etc/puppetlabs/puppet/environments/",
}

for _, server in ipairs(www_target_list) do
        sync {
                default.rsync,
                delay = 0,
                source = "/etc/puppetlabs/puppet/environments/",
                target = server,
                rsync = {
                        compress = true,
                        acls = true,
                        verbose = true,
                        owner = true,
                        group = true,
                        perms = true,
                        rsh = "/usr/bin/ssh -p 22 -o StrictHostKeyChecking=no"
                }
        }
end



   ====



